<include file='Public/header' />
<body>
<include file='Public/sidebar' />
<div class="container-fluid">
    <div class="row">
        <div class="col-lg-12">
            <table class="table table-hover">
                <thead>
                <tr>
                    <th>uid</th>
                    <th>用户名</th>
                    <th>性别</th>
                    <th>角色</th>
                    <th>电话</th>
                    <th>状态</th>
                    <th>冻结</th>
                    <th>解除</th>
                </tr>
                </thead>
                <volist id="vo" name="data">
                    <tr>
                        <td class="">{$vo.uid}</td>
                        <td class="">{$vo.nickname}</td>
                        <td class="">{$vo.gender}</td>
                        <td class="">{$vo.phone}</td>
                        <td class="">{$vo.status}</td>
                        <td class="">
                            <button class="btn btn-sm btn-success pass" data-id="{$vo.discover_id}">
                                通过
                            </button>
                        </td>
                        <td class="">
                            <button class="btn btn-sm btn-danger nopass" data-id="{$vo.discover_id}">
                                不通过
                            </button>
                        </td>
                    </tr>
                </volist>
            </table>
        </div>
    </div>

</div>
<script>
    $('.pass').on('click', function() {
        var discover_id = $(this).data('id');
        var that = $(this);
        $.ajax({
            type: "POST",
            url: "{:U('Manage/pass')}",
            data: {id:discover_id},
            dataType: "json",
            success: function(data){
                if(data.status == 200){
                    that.parents('tr').remove();
                    alert(data.info);
                } else {
                    alert('未知错误');
                }
            }
        });
    })

    $('.nopass').on('click', function() {
        var discover_id = $(this).data('id');
        var that = $(this);
        $.ajax({
            type: "POST",
            url: "{:U('Manage/nopass')}",
            data: {id:discover_id},
            dataType: "json",
            success: function(data){
                if(data.status == 200){
                    that.parents('tr').remove();
                    alert(data.info);
                } else {
                    alert('未知错误');
                }
            }
        });
    })
</script>
</body>
</html>